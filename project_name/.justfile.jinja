default:
  @just --list

init:
  # git init & initial commit
  git init
  git add --all
  git commit -m "initial commit" -q

  # install venv
  uv python pin python3.{{python_minor}}
  uv sync
  git add uv.lock .python-version
  git commit -m "chore: uv sync" -q

  # pre-commit update
  uv run pre-commit autoupdate -j "$(nproc)"
  git add .pre-commit-config.yaml
  git commit -m "chore: pre-commit update" --allow-empty -q

  # pre-commit install
  uv run pre-commit install

  @just test

  @echo "use 'gh repo create' to set this repo on GitHub"
  @echo "use 'ln -s ~/code_TODOs/{{project_name}}.md ~/code/{{project_name}}/TODO.md' to create a TODO file"

prepare:
  uv sync
  uv run pre-commit install
  @echo "use 'ln -s ~/code_TODOs/{{project_name}}.md ~/code/{{project_name}}/TODO.md' to create a TODO file"

test:
  uv run pre-commit run --all-files
  uv run pytest
  uv run mypy
